\section{Extras}
\begin{frame}[fragile]
  \slidetitle
\end{frame}

\subsection{Remove untracked files}
\begin{frame}[fragile]
    \subslidetitle
  Tracking a project under git helps you to keep your workspace clean, after your compilation process generated some temporary files:

  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{touch \$(echo "compile" | hexdump | head -n1)}*)
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git status}*)
On branch master
...
(*\textcolor{red}{	0000000}*)
(*\textcolor{red}{	0a65}*)
(*\textcolor{red}{	6c69}*)
(*\textcolor{red}{	6f63}*)
(*\textcolor{red}{	706d}*)
...
\end{lstlisting}
  Now we would like to clean all this temporary files, using \cmd{git clean}:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git git clean -df}*)
Removing 0000000
Removing 0a65
...
\end{lstlisting}

\end{frame}

\subsection{Search with git}
\begin{frame}[fragile]
  \subslidetitle
  Lost in search? It is just convinient to have \cmd{git grep} handy:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git grep moon.js}*)
moon.html:        <script src="(*\textcolor{red}{moon.js}*)"></script>
\end{lstlisting}

  Some advanced git fu using \cmd{git log --pickaxe-regexp} tofind which commit introduced or removed the searched keyword:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git log --oneline --abbrev --pickaxe-regex "*moon*"}*)
a3c399f remove the blue moon
93ea12c change the green moon color to red
...
39719c9 initial commit
\end{lstlisting}

Note: One can use the \cmd{git show} combined with a commit hash to see more details.

  Finally some option of \cmd{git branch} permit to search to which branch a commit belongs:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git branch --contains a3c399f}*)
(*\textcolor[HTML]{00AA00}{* master}*)
\end{lstlisting}
\end{frame}

\subsection{Work with patches}
\begin{frame}[fragile]
    \subslidetitle

  Remove the blue moon:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{sed -i "/blue/d" moon.js}*)
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git commit -a -m "remove the blue moon"}*)
\end{lstlisting}

  The \cmd{git format-patch} generates patch file to be send to 3rd party collaborator, or mailing list:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git format-patch -1}*)
0001-remove-the-blue-moon.patch
\end{lstlisting}

  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{cat 0001-remove-the-blue-moon.patch}*)
From 7afa035a39c2dc9648b182772eee06e3181ae24e Mon Sep 17 00:00:00 2001
From: Eric Keller <keller.eric@gmail.com>
Date: Sun, 29 Nov 2015 10:06:27 +0000
Subject: [PATCH] remove the blue moon
...
 init();
-moon( "blue" );
 moon( "white" );
...
\end{lstlisting}

\end{frame}

\subsection{Apply a patch}
\begin{frame}[fragile]
    \subslidetitle
  First remove the last commit:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git reset --hard HEAD\textasciicircum1}*)
\end{lstlisting}
  Create new no-blue branch in order to apply this patch
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git checkout -b no-blue}*)
Switched to a new branch 'no-blue'
\end{lstlisting}

  The \cmd{git am} command takes a list of patch to apply to the current working area:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(no-blue)}*) $ (*\textcolor[HTML]{0000AA}{git am -3 0001-remove-the-blue-moon.patch}*)
Applying: remove the blue moon
\end{lstlisting}

  Note: As well as when merging branch the \cmd{git am} could potencially end up with conflict, therefore we would like to enfoce a 3way-merge with the \cmd{-3} option.

\end{frame}

\subsection{Cherrypick a commit} 
\begin{frame}[fragile] 
    \subslidetitle 
  You are currently implementing a bugfix on a released version and should simultaneously fix it in the tip of your development, seems to be a load of work! Not if you use \cmd{git cherry-pick}:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(no-blue)}*) $ (*\textcolor[HTML]{0000AA}{git log -1 --oneline}*)
(*\textcolor[HTML]{ae6617}{1d36adc}*) remove the blue moon
\end{lstlisting}
  Change to the master branch:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(no-blue)}*) $ (*\textcolor[HTML]{0000AA}{git checkout master}*)
Switched to branch 'master'
\end{lstlisting}
  Now we try to cherry-pick the preceding commit:
  \begin{lstlisting}
(*\textcolor[HTML]{18B2B2}{(master)}*) $ (*\textcolor[HTML]{0000AA}{git cherry-pick 1d36adc}*)
[master fbd4ca8] remove the blue moon
 Date: Sun Nov 29 10:06:27 2015 +0000
 1 file changed, 1 deletion(-)
\end{lstlisting}
  Note:  The \cmd{git cherry-pick} could potencially end up with conflict.
\end{frame}


\subsection{Configure git}
\begin{frame}[fragile]
  \subslidetitle
  \begin{block}{Getting started with git}
    Once you have git installed you are able to configure git on 3 different levels:
    \begin{itemize}
      \option{local repository level}{path/to/repository/.git/config}
      \option{user level}{ /home/\$USER/.gitconfig }
      \option{system level}{on GNU/Linux: /etc/gitconfig}
    \end{itemize}

    The configuration file is a simple text file and can be edited with any text editor.
    Priority of git config: local, user, system.
  \end{block}
\end{frame}

\subsection{git config}
\begin{frame}[fragile]
  \subslidetitle
  The command \cmd{git config} can be used to change the global, system and local config of git.
  \begin{itemize}
      \option{git config ..}{}
      \option{git config --global ..}{}
      \option{git config --system ..}{}
  \end{itemize}
\end{frame}

\subsection{Set username and email}
\begin{frame}[fragile]
  \subslidetitle
  \vspace{1em}
  Set your name and email locally:
  \begin{itemize}
      \option{git config add user.name "My name"}{}
      \option{git config add user.email "myemail@git.ch"}{}
  \end{itemize}
  \vspace{1em}
  Or globally:
  \begin{itemize}
      \option{git config --global add user.name "My name"}{}
      \option{git config --global add user.email "myemail@git.ch"}{}
  \end{itemize}

  Extract from \bf{$\sim$/.gitconfig}
\begin{lstlisting}
[user]
  name = Andreas Schmid
  email = ikeark@gmail.com
\end{lstlisting}
\end{frame}

\subsection{Create aliases}
\begin{frame}[fragile]
  \subslidetitle

  Git allows to create aliases for commands.

  Example:

  instead of typing \bf{git status} we want to type \bf{git st}.

  Define alias:
  \begin{lstlisting}
  git config --global alias.st = status
  git config --global alias.co = checkout
  git config --global alias.ci = commit
  git config --global alias.br = branch
  \end{lstlisting}


  Extract from \bf{$\sim$/.gitconfig}
\begin{lstlisting}
[alias]
  st = status
  co = checkout
  ci = commit
  br = branch
  l = log --graph --pretty=format:'%C(yellow)%h%C(cyan)%d%Creset %s %C(white)- %an, %ar%Creset'
  ll = log --stat --abbrev-commit
\end{lstlisting}
\end{frame}

\subsection{Set mergetool}
\begin{frame}[fragile]
  \subslidetitle
\begin{lstlisting}
[merge]
  tool = kdiff3
\end{lstlisting}
\end{frame}

\subsection{Example $\sim$/.gitconfig}
\begin{frame}[fragile]
  \subslidetitle

\begin{lstlisting}
[user]
  name = Andreas Schmid
  email = ikeark@gmail.com

[color]
  diff = auto
  status = auto
  branch = auto
  grep = auto

[alias]
  st = status
  co = checkout
  ci = commit
  br = branch
  l = log --graph --pretty=format:'%C(yellow)%h%C(cyan)%d%Creset %s %C(white)- %an, %ar%Creset'
  ll = log --stat --abbrev-commit

[merge]
  tool = kdiff3
\end{lstlisting}
\end{frame}
\subsection{git bash prompt}
\begin{frame}[fragile]
  \subslidetitle

  Don't you like this bash prompt:
  \begin{lstlisting}
  (*\textcolor[HTML]{54FF54}{kraeki@deathstar:}*)(*\textcolor[HTML]{5454FF}{\textasciitilde/work/gitworkshop}*) (*\textcolor[HTML]{18B2B2}{(master)}*) $
  (*\textcolor[HTML]{54FF54}{kraeki@deathstar:}*)(*\textcolor[HTML]{5454FF}{\textasciitilde/work/gitworkshop}*) (*\textcolor[HTML]{18B2B2}{(master)}*) $
  \end{lstlisting}

  In your \cmd{\textasciitilde/.bashrc} replace your prompt with this:
  In your \cmd{\textasciitilde/.bashrc} replace your prompt with this:
  \begin{lstlisting}[language=bash]
GIT_PS1_SHOWDIRTYSTATE=1 # showing state of working directory
color_prompt=yes
if [ "$color_prompt" = yes ]; then
  PS1='${debian_chroot:+($debian_chroot)}\[\033[00m\]\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\[\033[0;36m\]$(__git_ps1 " (%s)")\[\033[00m\] \$ '
else
  PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
unset color_prompt force_color_prompt
\end{lstlisting}

  Don't forget to reload your bash environment: \cmd{source \textasciitilde/.bashrc}
  Don't forget to reload your bash environment: \cmd{source \textasciitilde/.bashrc}

\end{frame}
